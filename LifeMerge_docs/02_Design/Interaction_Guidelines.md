# Interaction Guidelines — LifeMerge (MVP)

*Григорий — Interaction Design / Motion / Micro-interactions*

Документ определяет принципы анимаций, переходов и микро-взаимодействий для MVP LifeMerge. Опираться на UI Kit, тёмную тему, производительность Flutter и общие UX‑паттерны из дизайн-системы.

---

## 1. Цели анимаций в LifeMerge

1. Повысить ясность интерфейса — анимации должны помогать ориентироваться в данных (календарь, задачи, финансы).
2. Передавать тактильность — физические паттерны, реалистичная инерция, лёгкие пружины.
3. Снизить когнитивную нагрузку — направлять внимание, а не привлекать его без причины.
4. Работать в тёмной теме без визуального шума.
5. Быть лёгкими для производительности (60 fps, минимизация слоёв, избегать тяжёлых эффектов).

---

## 2. Паттерны анимаций для MVP

### 2.1. Fade-Scale для появления контента

**Использование:** карточки задач, элементы списков, записи Inbox, модальные окна.

* Время: 120–160 мс
* Кривая: easeOutCubic
* Поведение: лёгкое увеличение от 0.96 → 1.0 + fade 0 → 1
* Flutter: `FadeTransition + ScaleTransition`, без лишних RepaintBoundary

### 2.2. Slide-Fade вертикальный для переходов между вкладками

**Использование:** переключение Home → Calendar → Tasks → Finance.

* Время: 160–200 мс
* Кривая: standard (0.4, 0.0, 0.2, 1)
* Избегать больших параллаксов — акцент на плавности.

### 2.3. Shared Axis (Horizontal) для Calendar / Tasks

**Использование:** переходы между списками задач, карточкой задачи, карточкой события.

* Время: 180–220 мс
* Кривая: easeInOut
* Оси:

  * Горизонталь — для навигации между sibling‑экранами
  * Вертикаль — для переходов уровня вложенности (список → детальная)

### 2.4. Opacity Lift для выделения активного элемента

**Использование:** нажатие на карточку задачи, событие календаря, элемент Inbox.

* Время: 80–120 мс
* Лёгкое повышение яркости и глубины (elevation.sheet → elevation.card)
* Без масштабирования более чем на 1–2%

### 2.5. Animated Drag Feedback

**Использование:** drag & drop событий в Calendar.

* Время обратной связи: < 16 мс (реакция в один кадр)
* Эффект: при захвате — небольшое увеличение 1.00 → 1.04, тень усиливается.
* Возврат при отмене — пружина 180–220 мс.

---

## 3. Переходы для Calendar

### 3.1. День ↔ Неделя

**Цель:** сохранить пространственное восприятие времени.

**Анимация:**

* Изменение высоты таймлайнов с анимацией layout (AnimatedSize).
* События плавно перебираются в новую сетку.
* Duration: 220–260 мс.
* Кривая: easeInOutCubic.

**Рекомендации:**

* Не масштабировать весь экран — изменять лишь сетку.
* Включить hero‑анимацию для текущей временной метки.

### 3.2. Переход список событий → карточка события

**Паттерн:** Shared Axis Vertical.

* Деталь «выезжает» сверху, список слегка затемняется.
* Duration: 180–220 мс.
* Плавный elevation shift.

### 3.3. Drag & Drop: перемещение события

* Захват: тень ↑, масштаб 1.00 → 1.04.
* Перемещение: курсор/палец «ведёт» карточку без задержки.
* Drop: пружина 160–200 мс + небольшой fade на подтверждение.
* Конфликт времени (overlap): короткий красный highlight 80 мс.

---

## 4. Переходы для Tasks

### 4.1. Список задач → карточка задачи

**Паттерн:** Shared Axis Vertical.

* Сжатие списка вниз, карточка поднимается вверх.
* Duration: 200 мс.

### 4.2. Добавление задачи

**Паттерн:** Fade-Scale Up.

* Скейл 0.96 → 1.0 + opacity 0 → 1.
* Duration: 140–160 мс.
* Подчеркнуть момент появления и облегчить восприятие нового элемента.

### 4.3. Отметка «выполнено»

**Паттерн:** Completion Sweep.

* Иконка галочки анимируется sweep‑движением 120 мс.
* Карточка выцветает 1 → 0.4 opacity + лёгкий подъём 4 px.
* Полное исчезновение через 200 мс, если настроено автоскрытие.

### 4.4. Работа с подзадачами

* Раскрытие: height animation (AnimatedSize) 160 мс.
* Чёткая визуальная иерархия за счёт сдвига и линии слева.

---

## 5. Общие принципы Micro‑Interactions

### 5.1. Реалистичные тайминги

* Малые взаимодействия: 80–120 мс.
* Средние переходы: 160–220 мс.
* Большие изменения структуры: 220–300 мс.

### 5.2. Физичность без «пружинности ради пружинности»

* Использовать пружину только для drag/drop и подтверждений.
* Для всего остального — bezier-кривые UI Kit.

### 5.3. Отсутствие лишней хореографии

* Никаких «сложных входов» списков и карточек.
* Ключевой принцип MVP — скорость и визуальная ясность.

### 5.4. Темная тема

* Избегать светящихся элементов.
* Анимации должны работать без изменения контраста.

### 5.5. Производительность

* До 2 одновременно анимируемых свойств: opacity + scale или offset + opacity.
* Layout изменения через AnimatedSize, избегать анимации больших списков.

### 5.6. Обратная связь при ошибках

* Ошибочные состояния — короткий shake или highlight 80 мс.
* Для сетевых ошибок — fade‑banner сверху 200 мс.

---

## 6. Компоненты с обязательными анимациями

* Календарь: drag/drop, переход день⇄неделя, открытие карточки события.
* Задачи: отметка выполнения, открытие карточки, добавление новой.
* Inbox: появление элемента, преобразование в задачу/цель.
* Модальные окна: fade‑scale.

---

## 7. Не допускается

* Масштабирование экрана > 4% — вызывает дезориентацию.
* Избыточные тени на тёмной теме.
* Длительные (>300 мс) переходы в основных сценариях.
* Нелинейные кривые типа bounce для текстовых списков.

---

## 8. Требования к реализации (Flutter)

* Использовать Implicit Animations там, где возможно.
* Для Calendar использовать RepaintBoundary вокруг крупных таймлайнов.
* Обязательный тест performance профилем: 60 fps на Pixel 6 / iPhone 12.
* Анимации должны учитываться в DoD: UI соответствует макетам и спецификациям анимации.

---

## 9. Следующие шаги

1. Утвердить с Lead UI/UX Designer.
2. Синхронизировать с Flutter-командой по реализуемости.
3. Добавить анимации в прототип Figma.
4. Создать библиотеку motion‑токенов (durations, curves).

---

Документ готов к итерациям и расширению для Pro 1.0.
